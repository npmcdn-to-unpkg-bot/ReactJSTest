<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>React.JS</title>
    <script src="https://npmcdn.com/react@15.3.0/dist/react.js"></script>
    <script src="https://npmcdn.com/react-dom@15.3.0/dist/react-dom.js"></script>
    <script src="src/browser.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <style>
        table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }

        td, th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }

        tr:nth-child(even) {
            background-color: #dddddd;
        }

        img{
            max-width:25%; /* you can use % */
            height: auto;
        }
    </style>
</head>
<body>
<div id="container">
</div>

<script type="text/babel">

    var MovieTable = React.createClass({
        render: function() {
            var movies = this.props.movieList.map(function(movie, i) {
                return <MovieRow title={movie.title} genre={movie.genre} release={movie.release} awards={movie.awards} rating={movie.rating} />
            });
            return (
                    <table>
                        <thead>
                        <tr>
                            <th>Title</th>
                            <th>Genre</th>
                            <th>Release Year</th>
                            <th>Notable Awards</th>
                            <th>IMDB Rating</th>
                            <th>Watched</th>
                            <th>Edit</th>
                            <th>Delete</th>
                        </tr>
                        </thead>
                        <tbody>
                        {movies}
                        </tbody>
                    </table>
            );
        }
    });

    var CheckBox = React.createClass({
        getInitialState: function() {
            return {checked: true}
        },

        handleChecked: function () {
            this.setState({checked: !this.state.checked})
        },

        render: function () {
            var msg;
            if(!this.state.checked){
                msg = 'checked'
            }else{
                msg = 'unchecked'
            }
            return (
                    <div>
                        <input type="checkbox" onChange={this.handleChecked} />
                        {msg}
                    </div>
            );
        },
    });

    var Editing = React.createClass({
        getInitialState: function () {
            return {editing: false}
        },
        edit: function () {
            this.setState({editing: true});
        },
        remove: function () {
            console.log("delet")
        },
        save: function () {
            this.setState({editing: false});
        },

        renderNormal: function () {
            return (
                    <button onClick={this.edit} className="btn btn-info">Edit</button>
            );
        },

        renderForm: function () {
            return (
                    <div>
                        <textarea defaultValue={this.props.children}></textarea>
                        <button onClick={this.save} className="btn btn-success">Save</button>
                    </div>
            );
        },

        render: function () {
            if(this.state.editing){return this.renderForm();}else{return this.renderNormal()}
        }
    });

    var MovieRow = React.createClass({

        render: function() {
            return (
                    <tr>
                        <td>{this.props.title}</td>
                        <td>{this.props.genre}</td>
                        <td>{this.props.release}</td>
                        <td>{this.props.awards}</td>
                        <td>{this.props.rating}</td>
                        <td><CheckBox /></td>
                        <td><Editing /></td>
                        <td><button className="btn btn-danger" onClick={this.remove}>Delete</button></td>
                    </tr>
            )
        }
    });

    var MainApp = React.createClass({

        getInitialState: function() {
            return {
                movies: [{
                    title: "Nightmare on Elm Street",
                    genre: "Horror",
                    release: "July 12, 1985",
                    awards: "Avoriaz Fantastic Film Festival - Critics Award",
                    rating: "7.5/10"
                }, {
                    title: "Dread ",
                    genre: "Thriller",
                    release: "January 29, 2010",
                    awards: "Fright Meter Awards - Best Supporting Actress",
                    rating: "5.7/10"
                }]
            };
        },

        render: function() {
            return (
                    <div className="task">
                        <h1>React Task</h1>
                        <div className="content">
                            <MovieTable movieList={this.state.movies}/>
                        </div>
                        <div className="form">
                            <form ref="form" onSubmit={this.handleSubmit}>
                                Title: <input type="text" />
                                <button type="submit">Submit</button>
                            </form>
                        </div>
                    </div>
            )
        }
    });

    ReactDOM.render(<MainApp/>, document.getElementById('container'));

</script>

</body>
</html>